/*                                       */
import test_tool;

import test_helloworld;
import test_naming;
import test_string_u8;
import test_while;
import test_debug_invoke;
import test_gc;
import test_template;
import test_dup;
import test_static;
import test_enum;
import test_vm;
import test_thread;
/*                                       */
///////////////////////////////////////////
/*	TODO-LIST
 *  define function & type (maybe value have same problem) with same name may cause crash.
 *  32-bit machine equb may useless, now make sure full writing HANDLE(8B) with nullptr. need test. 
 */
///////////////////////////////////////////

func thread_vm_mem_test()
{
	var ths = []:array<std::thread>;

	std::println("Test begin!");
	std::sleep(10);
	std::println("Start thread!");
	for(var i = 0; i < 10; i+=1)
	{
		ths->add(std::thread(
			func()
			{
				while(true);
			}));
	}
	std::println("Waiting!");
	std::sleep(10);
	std::println("Close thread!");

	for(var th : ths)
	{
		th->abort();
	}
	std::println("Waiting!");
	std::sleep(20);
	std::println("Test Over!");
	std::sleep(20);
}
thread_vm_mem_test();

///////////////////////////////////////////
/*                                       */
std::println("Unit-test begin!");
execute_all_test();
/*                                       */

